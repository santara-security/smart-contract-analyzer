(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{5888:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>g});var n=l(5155),r=l(2115);function s(e){let{tree:t,expandedFolders:l,onToggle:r,selectedFile:s,onSelect:a,width:o,allFolderPaths:i=[],onToggleAll:c,allOpen:d}=e,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(e=>{let o=t?"".concat(t,"/").concat(e.name):e.name;if("folder"===e.type){let t=l.has(o);return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("button",{className:"flex items-center w-full px-2 py-1 text-xs text-neutral-300 hover:bg-neutral-700/30 rounded transition-colors",onClick:()=>r(o),title:t?"Collapse":"Expand",children:[(0,n.jsx)("span",{className:"mr-1",children:t?(0,n.jsx)("svg",{className:"w-3 h-3",viewBox:"0 0 20 20",fill:"none",children:(0,n.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"currentColor",strokeWidth:"2"})}):(0,n.jsx)("svg",{className:"w-3 h-3",viewBox:"0 0 20 20",fill:"none",children:(0,n.jsx)("path",{d:"M8 6l4 4-4 4",stroke:"currentColor",strokeWidth:"2"})})}),(0,n.jsx)("span",{className:"font-mono",children:e.name})]}),t&&(0,n.jsx)("div",{className:"ml-4 border-l border-neutral-700/30 pl-2",children:u(e.children,o)})]},o)}return(0,n.jsxs)("button",{className:"flex items-center w-full px-2 py-1 text-xs font-mono rounded transition-colors ".concat(s===o?"bg-blue-600/20 text-blue-400":"text-neutral-200 hover:bg-neutral-700/30"),onClick:()=>a(o),title:e.name,children:[(0,n.jsx)("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 20 20",fill:"none",children:(0,n.jsx)("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),e.name]},o)})};return(0,n.jsxs)("aside",{style:{width:o,display:"flex",flexDirection:"column",minHeight:"100%"},className:"bg-neutral-900/20 backdrop-blur-md border-r border-neutral-700/30",children:[(0,n.jsx)("div",{className:"flex-1 overflow-auto",children:u(t)}),(0,n.jsx)("div",{className:"mt-2 flex justify-center sticky bottom-0 bg-neutral-900/20 py-3",style:{zIndex:10},children:(0,n.jsx)("button",{className:"px-2 py-1 text-xs bg-blue-700/30 text-blue-200 rounded hover:bg-blue-700/50",onClick:c,disabled:0===i.length,children:d?"Close All Folder":"Open All Folder"})})]})}function a(e){let{tabs:t=["Example.sol"],activeTab:l=0,onTabClick:r,onTabClose:s}=e;return(0,n.jsx)("div",{className:"flex items-center gap-1 px-3 py-1 bg-neutral-900/20 backdrop-blur-md rounded-t-lg shadow border-b border-neutral-700/30",children:t.map((e,a)=>(0,n.jsxs)("div",{className:"flex items-center group relative",style:{minWidth:"90px",maxWidth:"180px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[(0,n.jsx)("button",{className:"px-3 py-1.5 font-medium text-xs rounded-lg transition-colors duration-200 border ".concat(l===a?"bg-blue-600 text-white border-blue-500/30 shadow":"bg-neutral-700/50 text-neutral-300 border-transparent hover:bg-neutral-700 hover:text-neutral-200","\n              "),style:{width:"100%",textAlign:"left"},onClick:()=>r&&r(a),title:e,children:e}),t.length>1&&(0,n.jsx)("button",{className:"ml-[-28px] mr-1 p-1 text-neutral-400 hover:text-red-400 hover:bg-neutral-700/50 rounded-full transition-colors absolute right-0 top-1/2 -translate-y-1/2 z-10",title:"Close tab",onClick:e=>{e.stopPropagation(),s&&s(a)},children:(0,n.jsx)("svg",{className:"w-3 h-3",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,n.jsx)("path",{d:"M6 6l8 8M6 14L14 6"})})})]},e+a))})}function o(e){let{filename:t="Example.sol",code:l=""}=e,[s,a]=(0,r.useState)(!1),o=async()=>{var e;(null==(e=navigator)?void 0:e.clipboard)&&(await navigator.clipboard.writeText(l||""),a(!0),setTimeout(()=>a(!1),1200))};return(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-neutral-900/20 border-b border-neutral-700/30",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-xs font-mono text-neutral-200",children:t}),(0,n.jsx)("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-1 rounded-full text-xs border border-blue-500/30 ml-2",children:"Solidity"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{className:"p-1 text-neutral-400 hover:text-neutral-200 hover:bg-neutral-700/50 rounded transition-colors",title:"Copy code",onClick:o,children:s?(0,n.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M5 13l4 4L19 7"})}):(0,n.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,n.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),(0,n.jsx)("rect",{x:"3",y:"3",width:"13",height:"13",rx:"2"})]})}),(0,n.jsx)("button",{className:"p-1 text-neutral-400 hover:text-neutral-200 hover:bg-neutral-700/50 rounded transition-colors",title:"Download code",onClick:()=>{let e=new Blob([l||""],{type:"text/plain"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t||"code.txt",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(n)},100)},children:(0,n.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{d:"M12 5v14m7-7H5"}),(0,n.jsx)("path",{d:"M12 19l-7-7h14z"})]})})]})]})}var i=l(764),c=l.n(i),d=l(6712),u=l.n(d),x=l(7877),h=l.n(x),m=l(3442),f=l.n(m);function p(e){let{code:t,filename:l,tabs:s=["Example.sol"],activeTab:i=0,onTabClick:d,onTabClose:u}=e,x=(0,r.useRef)(null),h=l?l.endsWith(".sol")?"solidity":l.endsWith(".js")?"javascript":(l.endsWith(".json"),"json"):"json";return(0,r.useEffect)(()=>{x.current&&c().highlightElement(x.current)},[t,h]),(0,n.jsxs)("div",{className:"flex-1 bg-neutral-900/20 bg-opacity-50 backdrop-blur-md rounded-lg shadow border border-neutral-700/30 m-6 pb-8 flex flex-col min-h-0",children:[(0,n.jsx)(a,{tabs:s.map(e=>e.split("/").pop()),activeTab:i,onTabClick:d,onTabClose:u}),(0,n.jsx)("div",{className:"px-4 pt-2 pb-1 border-b border-neutral-700/30 flex items-center justify-between",children:(0,n.jsx)(o,{filename:l||"Example.sol",code:t})}),(0,n.jsx)("div",{className:"flex-1 p-3 overflow-auto",children:(0,n.jsx)("pre",{className:"bg-neutral-700/50 px-3 py-2 rounded-lg text-xs font-mono text-neutral-200 whitespace-pre-wrap border border-neutral-600/30 shadow-inner",children:(0,n.jsx)("code",{ref:x,className:"hljs language-".concat(h),children:t})})})]})}function b(){return(0,n.jsxs)("div",{className:"h-7 px-4 flex items-center bg-neutral-900/20 border-t border-neutral-700/30 text-xs text-neutral-400 w-full sticky bottom-0 z-30",style:{minWidth:"0"},children:[(0,n.jsx)("span",{children:"Status: Ready"}),(0,n.jsx)("span",{className:"ml-auto",children:"Ln 1, Col 1"})]})}function v(e){let{children:t,sidebar:l,sidebarResizer:r}=e;return(0,n.jsxs)("div",{className:"flex min-h-screen bg-transparent z-10 px-0 py-0 max-w-none",children:[l,r,(0,n.jsx)("main",{className:"flex-1 flex flex-col bg-transparent px-0 py-0",children:t})]})}l(3262),c().registerLanguage("javascript",u()),c().registerLanguage("json",h()),f()(c());let g=e=>{var t;let{params:l}=e,[a,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(new Set),[d,u]=(0,r.useState)(["contracts/Token.sol"]),[x,h]=(0,r.useState)(0),[m,f]=(0,r.useState)("15vw"),[g,j]=(0,r.useState)({}),w=(0,r.useRef)(null),y=(0,r.useRef)(!1);(0,r.useEffect)(()=>{(async()=>{let e=await l;if(o(e),null==e?void 0:e.contractAddress){let t=await fetch("/api/find-contract-folders?contractAddress=".concat(e.contractAddress)),l=await t.json();if(l.matches&&l.matches.length>0){let e=l.matches[0],t=await fetch("/api/find-contract-files?contractFolder=".concat(e));j((await t.json()).fileContents||{})}}})()},[l]),(0,r.useEffect)(()=>{let e=Object.keys(g);e.length>0&&1===d.length&&!g[d[0]]&&(u([e[0]]),h(0))},[g]);let N=e=>{y.current&&f(Math.max(120,e.clientX))},k=()=>{y.current=!1,document.body.style.cursor=""};r.useEffect(()=>(window.addEventListener("mousemove",N),window.addEventListener("mouseup",k),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",k)}));let C=function(e){let t={};for(let n of Object.keys(e)){let e=n.split("/"),r=t;for(let t=0;t<e.length;t++){let n=e[t];if(t===e.length-1)r.children||(r.children=[]),r.children.push({type:"file",name:n});else{var l;let e=null==(l=r.children)?void 0:l.find(e=>"folder"===e.type&&e.name===n);e||(e={type:"folder",name:n,children:[]},r.children||(r.children=[]),r.children.push(e)),r=e}}}return t.children||[]}(g),E=function e(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];for(let r of t)if("folder"===r.type){let t=l?"".concat(l,"/").concat(r.name):r.name;n.push(t),r.children&&(n=n.concat(e(r.children,t)))}return n}(C),W=E.length>0&&E.every(e=>i.has(e));return(0,n.jsxs)("div",{className:"h-screen w-screen flex flex-col",style:{minHeight:"100vh",minWidth:"100vw"},children:[(0,n.jsx)("header",{className:"bg-neutral-900/20 backdrop-blur-md px-6 py-4 flex items-center border-b border-neutral-800/30",children:(0,n.jsx)("h1",{className:"text-xl font-bold text-neutral-200 tracking-tight",children:"IDE Beta"})}),(0,n.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:(0,n.jsx)(v,{sidebar:(0,n.jsx)(s,{tree:C,expandedFolders:i,onToggle:e=>{c(t=>{let l=new Set(t);return l.has(e)?l.delete(e):l.add(e),l})},selectedFile:d[x],onSelect:e=>{u(t=>t.includes(e)?(h(t.indexOf(e)),t):(h(t.length),[...t,e]))},width:m,style:{width:m,minWidth:m,maxWidth:m},allFolderPaths:E,onToggleAll:()=>{W?c(new Set):c(new Set(E))},allOpen:W}),sidebarResizer:(0,n.jsx)("div",{ref:w,onMouseDown:e=>{y.current=!0,document.body.style.cursor="col-resize"},style:{width:6,cursor:"col-resize",zIndex:20},className:"bg-neutral-700/30 hover:bg-blue-600/30 transition-colors h-full"}),children:(0,n.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",style:{height:"100%"},children:[(0,n.jsx)("div",{className:"flex-1 min-h-0",style:{overflowY:"auto"},children:(0,n.jsx)(p,{code:g[d[x]]||"// File not found",filename:null==(t=d[x])?void 0:t.split("/").pop(),tabs:d,activeTab:x,onTabClick:h,onTabClose:e=>{u(t=>{if(1===t.length)return t;let l=t.filter((t,l)=>l!==e);return x>e?h(x-1):x===e&&h(Math.max(0,e-1)),l})}})}),(0,n.jsx)(b,{})]})})})]})}},8428:(e,t,l)=>{Promise.resolve().then(l.bind(l,5888))}},e=>{var t=t=>e(e.s=t);e.O(0,[791,75,441,684,358],()=>t(8428)),_N_E=e.O()}]);